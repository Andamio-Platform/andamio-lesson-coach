# Test Assignment Commitment Transaction Lifecycle

You'll execute the complete assignment commitment lifecycle in your local development environment. This demonstrates how transactions flow through the system and what to monitor at each step.

## What Needs to be Tested

The complete assignment commitment lifecycle includes three transaction types:

**Student Transaction:**
* COMMIT_TO_ASSIGNMENT: Student commits to completing an assignment

**Teacher Transactions:**
* APPROVE_COMMITMENT: Teacher approves the student's commitment
* DENY_COMMITMENT: Teacher rejects the commitment

## Step-by-Step Instructions

### Step 1: Execute Student Commitment

**As a Student:**

1. Navigate to an assignment in your course (localhost:3000)
2. Click "Commit to Assignment"
3. Build transaction → Sign in wallet → Submit to blockchain
4. Wait for confirmation (1-3 minutes)

**Expected result:** Student is committed to the assignment, ready for teacher review.

---

### Step 2: Execute Teacher Approval or Denial

**As a Teacher:**

1. Switch to teacher view or use teacher wallet
2. Navigate to the assignment with pending commitments
3. Find the student's commitment in the review queue
4. Choose either:
   * Click "Approve Commitment" → Sign transaction
   * Click "Deny Commitment" → Sign transaction
5. Wait for confirmation

**Expected result:** Teacher decision is recorded on-chain and reflected in the database.

---

### Step 3: Verify Complete Lifecycle

Check that the full flow worked:

1. **Student View:** Assignment shows approved/denied status
2. **Teacher View:** Commitment appears in appropriate queue
3. **Database:** Final status matches teacher's decision (check in Prisma Studio)
4. **Blockchain:** All transactions are confirmed on Cardano Preprod

## Verification Checklist

Complete lifecycle testing is successful when all of the following are true:

* Student COMMIT_TO_ASSIGNMENT transaction confirms
* Teacher APPROVE or DENY transaction confirms
* Database reflects all status changes correctly
* UI shows updated states for both student and teacher
* All transactions visible on Cardano Preprod explorer
* Console shows successful API calls for all steps

## Console Monitoring Guide

**During COMMIT_TO_ASSIGNMENT:**

```
✅ POST /api/build-commitment-tx → 200 OK
✅ PATCH /assignment-commitments/.../status → 200 OK
✅ Transaction hash: abc123...
```

**During APPROVE/DENY:**

```
✅ POST /api/build-teacher-decision-tx → 200 OK
✅ PATCH /teacher-decisions/.../status → 200 OK
✅ Transaction hash: def456...
```

**Blockchain Confirmation:**

```
✅ Status: PENDING_TX → COMMITTED/APPROVED/DENIED
✅ networkEvidenceHash populated
```

## Common Issues

**Student can't commit:**
* Check course enrollment status first

**Teacher options not visible:**
* Ensure teacher wallet has proper permissions

**Transactions build but don't confirm:**
* Verify sufficient ADA in wallets (5-10 ADA recommended)

**Status stuck at PENDING:**
* Check monitoring service logs for confirmation processing

## What You've Built

You can now test the complete assignment commitment workflow from student commitment through teacher decision. You understand how to monitor each transaction type, verify database state changes, and debug issues across the entire lifecycle. This capability lets you validate that the contribution system works end-to-end in your development environment.

---

Part of What's New at Andamio > Andamio DB API and Template
